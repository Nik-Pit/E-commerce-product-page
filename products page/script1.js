"use strict";
/////////////////////////////////////////////////////////////////////////////////////////////////
// Books Data
export const books = [
  {
    id: 1,
    name: "Nineteen Eighty-Four",
    price: 19.99,
    image: "/images/0334040-264x264-800x800-96x96-560x560.webp",
    description:
      "Winston Smith is an employee at the Ministry of Truth. He is responsible for rewriting past records to align with the Party's current opinions. He greatly opposes the Party and wants to overthrow them. He meets a woman named Julia and starts an illegal affair with her, hiding in a secret apartment and discussing their feelings about the government. They soon find out that they were being watched the whole time, and they are tortured into saying that they no longer oppose the Party and Big Brother anymore.",
  },
  {
    id: 2,
    name: "The Art of Not Eating",
    price: 29.99,
    image: "/images/book2.avif",
    description:
      "n this bold and radical book, Hamel-Akré follows Cheyne through the pages of medical studies, novels and historical scandals, meeting ash-eating mystics, wasting society girls, impoverished female fasters and early feminist philosophers, all of whom were once grappling with nascent ideas around food, longing and the body. In doing so, she uncovers the eighteenth-century origins of both today's diet culture and her own troubled relationship with wanting.",
  },
  {
    id: 3,
    name: "What Are Children For",
    price: 9.99,
    image: "/images/book3.webp",
    description:
      "Across the developed world, fewer and fewer people are becoming parents. We seek self-fulfilment; we want women to find meaning and self-worth outside the household; we wish to protect the planet from the ravages of climate change; we do what we can to protect others from senseless suffering. On the face of it, none of these goals are served by having children. Amid such pressures, how on earth can we make the choice to do so?Anastasia Berg and Rachel Wiseman offer a way out of this inertia and indecision by reminding us that in making the individual decision whether to have children, we confront a profound philosophical question: for all its pains and failures, is human life worth living? What Are Children For? is a stirring call to overcome fear and dread and embrace the value of human existence and a human future.",
  },
  {
    id: 4,
    name: "To Kill A Mockingbird",
    price: 39.99,
    image: "/images/book4.jpg",
    description:
      "'Shoot all the Bluejays you want, if you can hit 'em, but remember it's a sin to kill a Mockingbird.' Lawyer Atticus Finch gives this advice to his children as he defends the real mockingbird of Harper Lee's classic novel - a black man charged with the rape of a white girl.Through the young eyes of Scout and Jem Finch, Harper Lee explores with exuberant humour the irrationality of adult attitudes to race and class in the Deep South of the 1930s. The conscience of a town steeped in prejudice, violence and hypocrisy is pricked by the stamina of one man's struggle for justice. But the weight of history will only tolerate so much...A benchmark of classic American literature, To Kill A Mockingbird approaches the highly sensitive topic of racism in 1930s America with humour, warmth and compassion, making it widely recognised as one of the best books of the twentieth century and in American literature.Winner of the 1961 Pulitzer Prize for Literature, Fiction.",
  },
  {
    id: 5,
    name: "The Great Gatsby",
    price: 9.99,
    image: "/images/book5.avif",
    description:
      "Generally considered to be F. Scott Fitzgerald's finest novel, The Great Gatsby is a consummate summary of the 'roaring twenties', and a devastating expose of the 'Jazz Age'. Through the narration of Nick Carraway, the reader is taken into the superficially glittering world of the mansions which lined the Long Island shore in the 1920s, to encounter Nick's cousin Daisy, her brash but wealthy husband Tom Buchanan, Jay Gatsby and the mystery that surrounds him.",
  },
  {
    id: 6,
    name: "Thursday Murder Club",
    price: 19.99,
    image: "/images/book6.webp",
    description:
      "In a peaceful retirement village, four unlikely friends meet up once a week to investigate unsolved murders.But when a brutal killing takes place on their very doorstep, the Thursday Murder Club find themselves in the middle of their first live case.Elizabeth, Joyce, Ibrahim and Ron might be pushing eighty but they still have a few tricks up their sleeves.Can our unorthodox but brilliant gang catch the killer before it's too late?",
  },
  {
    id: 7,
    name: "Penguin Book of Norse Myths",
    price: 29.99,
    image: "/images/book7-.avif",
    description:
      "'Burning ice, biting flame; that is how life began'The extraordinary Scandinavian myth cycle is one of the most enduring, exciting, dramatic and compelling of the world's great stories.The Penguin Book of the Norse Myths compellingly retells these stories for the modern reader, taking us from the creation of the world through the building of Asgard's Wall to the final end in Ragnarok. You'll discover how Thor got his hammer and how Odin lost his eye, the terrible price of binding the wolf Fenrir and why Loki the trickster can never be trusted.The Norse myths are as thrilling to read as they are of vast cultural and historical importance. In this gripping book Kevin Crossley-Holland brings alive the passion, cruelty and heroism of these unforgettable stories.",
  },
  {
    id: 8,
    name: "Master and Commander",
    price: 9.99,
    image: "/images/book8.avif",
    description:
      "In this, the first of Patrick O'Brian's much lauded Aubrey-Maturin novels, discover a vibrant world conjured by a master storyteller, rich with detail and character.1800. Napoleon Bonaparte is the biggest threat to peace yet seen.Newly promoted to command of his first ship, Captain Jack Aubrey, along with his crew, and new friend and ship's surgeon Stephen Maturin, must patrol a Mediterranean fraught with peril but rich with rewards. A glimpse of white sails on the horizon could mean a prize to be taken - or a fight for survival.",
  },
  {
    id: 9,
    name: "The Picture of Dorian Gray",
    price: 9.99,
    image: "/images/book9.avif",
    description:
      "With an Introduction and Notes by John M.L. Drew, University of Buckingham. Wilde's only novel, first published in 1890, is a brilliantly designed puzzle, intended to tease conventional minds with its exploration of the myriad interrelationships between art, life, and consequence. From its provocative Preface, challenging the reader to believe in 'art for art's sake', to its sensational conclusion, the story self-consciously experiments with the notion of sin as an element of design. Yet Wilde himself underestimated the consequences of his experiment, and its capacity to outrage the Victorian establishment. Its words returned to haunt him in his court appearances in 1895, and he later recalled the 'note of doom' which runs like 'a purple thread' through its carefully crafted prose.",
  },
  {
    id: 10,
    name: "The Forever Dog",
    price: 29.99,
    image: "/images/book10.avif",
    description:
      "Two of the world's most popular and trusted pet care advocates reveal new science to teach us how to delay ageing and provide a long, happy, healthy life for our canine companions. The definitive, cutting-edge guide for every dog parent.Like their human parents, dogs have been getting sicker over the past few decades. Why? Scientists are beginning to understand that the diseases affecting humans - cancer, obesity, diabetes, organ degeneration, and autoimmune disorders - also afflict canines.As a result, our canine companions are vexed with health problems throughout much of their lives and have shorter life spans. Since our pets can't make health and lifestyle decisions for themselves, it's up to pet parents to make smart choices for their dogs' lasting vitality and health.The Forever Dog gives us the tools to protect our four-legged friends. Rodney Habib and Dr. Karen Becker talked to top geneticists, microbiologists, and researchers, and interviewed people around the world whose dogs have lived into their 20s and even 30s. The result is this unprecedented and comprehensive guide, filled with practical information, invaluable advice, and inspiring stories about dogs and the people who love them.The Forever Dog plan focuses on:* diet and nutrition* movement* stress reduction* tailoring care to the genetic predisposition of particular breeds or mixes* recipes and types of food - and what the commercial manufacturers don't want us to know* tons of practical tips* how exercise, environmental toxins, and our lifestyles affect a dog's overall health.Global medical breakthroughs have expanded our choices for canine health. The Forever Dog is the definitive dog-care guide that gives us the knowledge we need to make wise choices, and to keep our dogs healthy and happy for years to come.",
  },
];
/////////////////////////////////////////////////////////////////////////////////////////////////
// Display books on the page
function displayBooks() {
  const booksList = document.querySelector(".books-list");
  books.forEach((book) => {
    const bookItem = document.createElement("div");
    bookItem.classList.add("book-item");
    const truncatedDescription = truncateText(book.description, 3);
    bookItem.innerHTML = `
      <img src="${book.image}" alt="${book.name}">
      <h2>${book.name}</h2>
      <p>${truncatedDescription}</p>
      <h3>${book.price.toFixed(2)}€</h3>
      
    `;
    // Description button
    const descriptionBtn = document.createElement("button");
    descriptionBtn.textContent = "Read Description";
    descriptionBtn.addEventListener("click", () => openModal(book.description));
    bookItem.appendChild(descriptionBtn);
    // Add to cart btn
    const addButton = document.createElement("button");
    addButton.textContent = "Add to Cart";
    addButton.addEventListener("click", () => addToCart(book.id));
    bookItem.appendChild(addButton);
    booksList.appendChild(bookItem);
  });
}
// Description text shortened
function truncateText(text, wordLimit) {
  const words = text.split(" ");
  return words.length > wordLimit
    ? words.slice(0, wordLimit).join(" ") + "..."
    : text;
}
// Description Modal
function openModal(description) {
  const modal = document.getElementById("description-modal");
  const modalDescription = document.getElementById("modal-description");
  const closeBtn = document.querySelector(".close");

  modalDescription.textContent = description;
  modal.classList.remove("hidden");
  modal.style.display = "block";

  closeBtn.onclick = function () {
    modal.style.display = "none";
  };

  window.onclick = function (e) {
    if (e.target == modal) {
      modal.style.display = "none";
    }
  };

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      modal.style.display = "none";
    }
  });
}

// Initialize the books display
displayBooks();

/////////////////////////////////////////////////////////////////////////////////////////////////
// // Cart state
let cart = [];
// // Add product to cart
function addToCart(bookId) {
  const book = books.find((b) => b.id === bookId);
  cart.push(book);
  updateCartCount();
}

// // Update cart item count
function updateCartCount() {
  const cartCount = document.getElementById("cart-count");
  cartCount.textContent = cart.length;
}
/////////////////////////////////////////////////////////////////////////////////////////////////
// Show the cart modal
// Event listeners
const cartBtn = document.getElementById("viewCart");
const closeCartBtn = document.getElementById("close-cart");

cartBtn.addEventListener("click", showCart);
closeCartBtn.addEventListener("click", hideCart);
function showCart() {
  const cartModal = document.getElementById("cart-modal");
  const cartItems = document.getElementById("cart-items");
  const cartTotal = document.getElementById("cart-total");

  cartModal.classList.remove("hidden");
  cartModal.style.display = "block";

  cartItems.innerHTML = "";

  let total = 0;

  cart.forEach((book) => {
    const cartItem = document.createElement("li");
    cartItem.textContent = `${book.name} --- ${book.price.toFixed(2)}€`;
    cartItems.appendChild(cartItem);
    total += book.price;
  });

  cartTotal.textContent = total.toFixed(2);
}

// Hide the cart modal
function hideCart() {
  const cartModal = document.getElementById("cart-modal");
  cartModal.style.display = "none";

  window.onclick = (e) => {
    if (e.target == cartModal) {
      cartModal.style.display = "none";
    }
  };

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      cartModal.style.display = "none";
    }
  });
}
